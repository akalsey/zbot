{"version":3,"sources":["../../src/plugins/people.js"],"names":["People","extend","get","person","id","personId","request","uri","config","hydraServiceUrl","then","res","body","list","options","qs","spark"],"mappings":";;;;;;AAMA;;AAEA;;;;;;;;AAQA;;;;AAIA,IAAMA,SAAS,uBAAYC,MAAZ,CAAmB;AAChC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BAC,KAhCgC,eAgC5BC,MAhC4B,EAgCpB;AACV,QAAMC,KAAKD,OAAOE,QAAP,IAAmBF,OAAOC,EAA1B,IAAgCD,MAA3C;AACA,WAAO,KAAKG,OAAL,CAAa;AAClBC,WAAQ,KAAKC,MAAL,CAAYC,eAApB,gBAA8CL;AAD5B,KAAb,EAGJM,IAHI,CAGC,UAACC,GAAD;AAAA,aAASA,IAAIC,IAAb;AAAA,KAHD,CAAP;AAID,GAtC+B;;;AAwChC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwCAC,MAhFgC,gBAgF3BC,OAhF2B,EAgFlB;AAAA;;AACZ,WAAO,KAAKR,OAAL,CAAa;AAClBC,WAAQ,KAAKC,MAAL,CAAYC,eAApB,YADkB;AAElBM,UAAID;AAFc,KAAb,EAIJJ,IAJI,CAIC,UAACC,GAAD;AAAA,aAAS,oBAASA,GAAT,EAAc,MAAKK,KAAnB,CAAT;AAAA,KAJD,CAAP;AAKD;AAtF+B,CAAnB,CAAf,C,CApBA;;;;;;kBA6GehB,M","file":"people.js","sourcesContent":["/**!\n *\n * Copyright (c) 2015-2016 Cisco Systems, Inc. See LICENSE file.\n * @private\n */\n\nimport {SparkPlugin, Page} from '@ciscospark/spark-core';\n\n/**\n * @typedef {Object} Types~Person\n * @property {uuid} id - Unique identifier for the person\n * @property {Array<email>} emails - Email addresses of the person\n * @property {string} displayName - Display name of the person\n * @property {isoDate} created - The date and time that the person was created\n */\n\n/**\n * @class\n * @extends SparkPlugin\n */\nconst People = SparkPlugin.extend({\n  /**\n   * Returns a single person by ID\n   * @instance\n   * @memberof People\n   * @param {Types~Person|uuid} person\n   * @returns {Promise<Types~Person>}\n   * @example\n   * var ciscospark = require('../..');\n   * ciscospark.rooms.create({title: 'Get Person Example'})\n   *   .then(function(room) {\n   *     return ciscospark.memberships.create({\n   *       personEmail: 'alice@example.com',\n   *       roomId: room.id\n   *     });\n   *   })\n   *   .then(function(membership) {\n   *     return ciscospark.people.get(membership.personId);\n   *   })\n   *   .then(function(alice) {\n   *     var assert = require('assert');\n   *     assert(alice.id);\n   *     assert(Array.isArray(alice.emails));\n   *     assert.equal(alice.emails.filter(function(email) {\n   *       return email === 'alice@example.com';\n   *     }).length, 1);\n   *     assert(alice.displayName);\n   *     assert(alice.created);\n   *     return 'success';\n   *   });\n   *   // => success\n   */\n  get(person) {\n    const id = person.personId || person.id || person;\n    return this.request({\n      uri: `${this.config.hydraServiceUrl}/people/${id}`\n    })\n      .then((res) => res.body);\n  },\n\n  /**\n   * Returns a list of people\n   * @instance\n   * @memberof People\n   * @param {Object} options\n   * @param {email} options.email - Returns people with an email that contains this string\n   * @param {string} options.name - Returns people with a name that contains this string\n   * @returns {Promise<Page<Types~Person>>}\n   * @example\n   * var ciscospark = require('../..');\n   * var room;\n   * ciscospark.rooms.create({title: 'List People Example'})\n   *   .then(function(r) {\n   *     room = r;\n   *     return ciscospark.memberships.create({\n   *       personEmail: 'alice@example.com',\n   *       roomId: room.id\n   *     });\n   *   })\n   *   .then(function() {\n   *     return ciscospark.memberships.create({\n   *       personEmail: 'bob@example.com',\n   *       roomId: room.id\n   *     });\n   *   })\n   *   .then(function() {\n   *     return ciscospark.people.list({email: 'alice@example.com'});\n   *   })\n   *   .then(function(people) {\n   *     var assert = require('assert');\n   *     assert.equal(people.length, 1);\n   *     var person = people.items[0];\n   *     assert(person.id);\n   *     assert(Array.isArray(person.emails));\n   *     assert(person.displayName);\n   *     assert(person.created);\n   *     return 'success';\n   *   });\n   *   // => success\n   */\n  list(options) {\n    return this.request({\n      uri: `${this.config.hydraServiceUrl}/people`,\n      qs: options\n    })\n      .then((res) => new Page(res, this.spark));\n  }\n});\n\nexport default People;\n"]}