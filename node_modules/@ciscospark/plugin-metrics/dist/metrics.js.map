{"version":3,"sources":["../src/metrics.js"],"names":["Metrics","extend","children","batcher","clientMetricsBatcher","namespace","sendUnstructured","key","value","submit","request","submitClientMetrics","eventName","props","payload","metricName","tags","fields"],"mappings":";;;;;;;;;;;;;;+BAAA;;;;;;AAMA;;AACA;;;;AACA;;;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA,IAAMA,UAAU,uBAAYC,MAAZ,SAQb,wGARa,UAAmB;AACjCC,YAAU;AACRC,8BADQ;AAERC;AAFQ,GADuB;;AAMjCC,sBANiC;;AASjCC,kBATiC,4BAShBC,GATgB,EASXC,KATW,EASJ;AAC3B,WAAO,KAAKC,MAAL,CAAYF,GAAZ,EAAiBC,KAAjB,CAAP;AACD,GAXgC;AAajCC,QAbiC,kBAa1BF,GAb0B,EAarBC,KAbqB,EAad;AACjB,WAAO,KAAKL,OAAL,CAAaO,OAAb,CAAqB,sBAAc,EAACH,QAAD,EAAd,EAAqBC,KAArB,CAArB,CAAP;AACD,GAfgC;AAiBjCG,qBAjBiC,+BAiBbC,SAjBa,EAiBFC,KAjBE,EAiBK;AACpC,QAAMC,UAAU,EAACC,YAAYH,SAAb,EAAhB;AACA,QAAIC,MAAMG,IAAV,EAAgB;AACdF,cAAQE,IAAR,GAAeH,MAAMG,IAArB;AACD;AACD,QAAIH,MAAMI,MAAV,EAAkB;AAChBH,cAAQG,MAAR,GAAiBJ,MAAMI,MAAvB;AACD;AACD,WAAO,KAAKb,oBAAL,CAA0BM,OAA1B,CAAkCI,OAAlC,CAAP;AACD;AA1BgC,CAAnB,iJAAhB;;kBA6Bed,O","file":"metrics.js","sourcesContent":["/**!\n *\n * Copyright (c) 2015-2016 Cisco Systems, Inc. See LICENSE file.\n * @private\n */\n\nimport {SparkPlugin} from '@ciscospark/spark-core';\nimport Batcher from './batcher';\nimport ClientMetricsBatcher from './client-metrics-batcher';\nimport {deprecated} from 'core-decorators';\n\nconst Metrics = SparkPlugin.extend({\n  children: {\n    batcher: Batcher,\n    clientMetricsBatcher: ClientMetricsBatcher\n  },\n\n  namespace: `Metrics`,\n\n  @deprecated(`Metrics#sendUnstructured() is deprecated; please use Metrics#submit()`)\n  sendUnstructured(key, value) {\n    return this.submit(key, value);\n  },\n\n  submit(key, value) {\n    return this.batcher.request(Object.assign({key}, value));\n  },\n\n  submitClientMetrics(eventName, props) {\n    const payload = {metricName: eventName};\n    if (props.tags) {\n      payload.tags = props.tags;\n    }\n    if (props.fields) {\n      payload.fields = props.fields;\n    }\n    return this.clientMetricsBatcher.request(payload);\n  }\n});\n\nexport default Metrics;\n"]}