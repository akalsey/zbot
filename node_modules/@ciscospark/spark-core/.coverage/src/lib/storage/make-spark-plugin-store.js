"use strict";
var __cov_a0IMpjQPRVEPmrXQrTOVVA = (Function('return this'))();
if (!__cov_a0IMpjQPRVEPmrXQrTOVVA.__coverage__) { __cov_a0IMpjQPRVEPmrXQrTOVVA.__coverage__ = {}; }
__cov_a0IMpjQPRVEPmrXQrTOVVA = __cov_a0IMpjQPRVEPmrXQrTOVVA.__coverage__;
if (!(__cov_a0IMpjQPRVEPmrXQrTOVVA['packages/spark-core/src/lib/storage/make-spark-plugin-store.js'])) {
   __cov_a0IMpjQPRVEPmrXQrTOVVA['packages/spark-core/src/lib/storage/make-spark-plugin-store.js'] = {"path":"packages/spark-core/src/lib/storage/make-spark-plugin-store.js","s":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":1,"18":0,"19":1,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":1,"38":0,"39":0,"40":0,"41":1,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0},"fnMap":{"1":{"line":37,"loc":{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true},"skip":true,"name":"_interopRequireDefault"},"2":{"line":39,"loc":{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true},"skip":true,"name":"_applyDecoratedDescriptor"},"3":{"line":41,"loc":{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true},"skip":true,"name":"(anonymous_3)"},"4":{"line":51,"loc":{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true},"skip":true,"name":"(anonymous_4)"},"5":{"line":80,"loc":{"start":{"line":19,"column":15},"end":{"line":19,"column":62}},"name":"makeSparkPluginStorage"},"6":{"line":87,"loc":{"start":{"line":108,"column":28},"end":{"line":108,"column":28}},"name":"keyFactory"},"7":{"line":89,"loc":{"start":{"line":19,"column":62},"end":{"line":19,"column":62}},"name":"(anonymous_7)"},"8":{"line":95,"loc":{"start":{"line":30,"column":4},"end":{"line":30,"column":18}},"name":"SparkPluginStorage"},"9":{"line":109,"loc":{"start":{"line":19,"column":62},"end":{"line":38,"column":12}},"name":"clear"},"10":{"line":121,"loc":{"start":{"line":19,"column":62},"end":{"line":47,"column":17}},"name":"del"},"11":{"line":140,"loc":{"start":{"line":19,"column":62},"end":{"line":57,"column":13}},"name":"get"},"12":{"line":147,"loc":{"start":{"line":65,"column":14},"end":{"line":65,"column":23}},"name":"(anonymous_12)"},"13":{"line":162,"loc":{"start":{"line":19,"column":62},"end":{"line":77,"column":17}},"name":"put"},"14":{"line":183,"loc":{"start":{"line":19,"column":62},"end":{"line":89,"column":17}},"name":"waitFor"},"15":{"line":208,"loc":{"start":{"line":19,"column":62},"end":{"line":111,"column":19}},"name":"initValue"},"16":{"line":214,"loc":{"start":{"line":118,"column":14},"end":{"line":118,"column":25}},"name":"(anonymous_16)"},"17":{"line":226,"loc":{"start":{"line":133,"column":15},"end":{"line":133,"column":27}},"name":"(anonymous_17)"}},"statementMap":{"1":{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true},"2":{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true},"3":{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true},"4":{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true},"5":{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true},"6":{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true},"7":{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true},"8":{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true},"9":{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true},"10":{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true},"11":{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true},"12":{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true},"13":{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true},"14":{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true},"15":{"start":{"line":7,"column":0},"end":{"line":7,"column":0}},"16":{"start":{"line":8,"column":0},"end":{"line":8,"column":0}},"17":{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true},"18":{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true},"19":{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true},"20":{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true},"21":{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true},"22":{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true},"23":{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true},"24":{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true},"25":{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true},"26":{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true},"27":{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true},"28":{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true},"29":{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true},"30":{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true},"31":{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true},"32":{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true},"33":{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true},"34":{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true},"35":{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true},"36":{"start":{"line":11,"column":0},"end":{"line":11,"column":0}},"37":{"start":{"line":19,"column":15},"end":{"line":150,"column":1}},"38":{"start":{"line":19,"column":62},"end":{"line":19,"column":62}},"39":{"start":{"line":19,"column":62},"end":{"line":19,"column":62}},"40":{"start":{"line":108,"column":28},"end":{"line":108,"column":28}},"41":{"start":{"line":30,"column":4},"end":{"line":32,"column":5}},"42":{"start":{"line":30,"column":18},"end":{"line":30,"column":18}},"43":{"start":{"line":31,"column":6},"end":{"line":31,"column":6}},"44":{"start":{"line":19,"column":62},"end":{"line":19,"column":62}},"45":{"start":{"line":39,"column":6},"end":{"line":39,"column":6}},"46":{"start":{"line":47,"column":17},"end":{"line":47,"column":17}},"47":{"start":{"line":47,"column":17},"end":{"line":47,"column":17}},"48":{"start":{"line":47,"column":11},"end":{"line":47,"column":17}},"49":{"start":{"line":48,"column":6},"end":{"line":48,"column":6}},"50":{"start":{"line":58,"column":6},"end":{"line":58,"column":6}},"51":{"start":{"line":59,"column":6},"end":{"line":62,"column":7}},"52":{"start":{"line":60,"column":8},"end":{"line":60,"column":8}},"53":{"start":{"line":61,"column":8},"end":{"line":61,"column":8}},"54":{"start":{"line":64,"column":6},"end":{"line":64,"column":6}},"55":{"start":{"line":66,"column":10},"end":{"line":66,"column":10}},"56":{"start":{"line":67,"column":10},"end":{"line":67,"column":10}},"57":{"start":{"line":77,"column":17},"end":{"line":77,"column":17}},"58":{"start":{"line":77,"column":17},"end":{"line":77,"column":17}},"59":{"start":{"line":77,"column":11},"end":{"line":77,"column":17}},"60":{"start":{"line":78,"column":6},"end":{"line":78,"column":6}},"61":{"start":{"line":90,"column":6},"end":{"line":90,"column":6}},"62":{"start":{"line":91,"column":6},"end":{"line":91,"column":6}},"63":{"start":{"line":92,"column":6},"end":{"line":95,"column":7}},"64":{"start":{"line":93,"column":8},"end":{"line":93,"column":8}},"65":{"start":{"line":94,"column":8},"end":{"line":94,"column":8}},"66":{"start":{"line":97,"column":6},"end":{"line":97,"column":6}},"67":{"start":{"line":98,"column":6},"end":{"line":98,"column":6}},"68":{"start":{"line":112,"column":6},"end":{"line":112,"column":6}},"69":{"start":{"line":113,"column":6},"end":{"line":113,"column":6}},"70":{"start":{"line":117,"column":6},"end":{"line":117,"column":6}},"71":{"start":{"line":119,"column":10},"end":{"line":119,"column":10}},"72":{"start":{"line":120,"column":10},"end":{"line":128,"column":11}},"73":{"start":{"line":121,"column":12},"end":{"line":121,"column":12}},"74":{"start":{"line":123,"column":15},"end":{"line":128,"column":11}},"75":{"start":{"line":124,"column":12},"end":{"line":124,"column":12}},"76":{"start":{"line":127,"column":12},"end":{"line":127,"column":12}},"77":{"start":{"line":129,"column":10},"end":{"line":129,"column":10}},"78":{"start":{"line":130,"column":10},"end":{"line":130,"column":10}},"79":{"start":{"line":131,"column":10},"end":{"line":131,"column":10}},"80":{"start":{"line":137,"column":10},"end":{"line":140,"column":11}},"81":{"start":{"line":138,"column":12},"end":{"line":138,"column":12}},"82":{"start":{"line":139,"column":12},"end":{"line":139,"column":12}},"83":{"start":{"line":141,"column":10},"end":{"line":141,"column":10}},"84":{"start":{"line":142,"column":10},"end":{"line":142,"column":10}},"85":{"start":{"line":145,"column":6},"end":{"line":145,"column":6}},"86":{"start":{"line":19,"column":62},"end":{"line":19,"column":62}},"87":{"start":{"line":149,"column":2},"end":{"line":149,"column":2}}},"branchMap":{"1":{"line":37,"type":"cond-expr","locations":[{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true},{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true}]},"2":{"line":37,"type":"binary-expr","locations":[{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true},{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true}]},"3":{"line":47,"type":"if","locations":[{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true},{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true}]},"4":{"line":47,"type":"binary-expr","locations":[{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true},{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true}]},"5":{"line":52,"type":"binary-expr","locations":[{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true},{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true}]},"6":{"line":55,"type":"if","locations":[{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true},{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true}]},"7":{"line":55,"type":"binary-expr","locations":[{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true},{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true}]},"8":{"line":56,"type":"cond-expr","locations":[{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true},{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true}]},"9":{"line":60,"type":"if","locations":[{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true},{"start":{"line":0,"column":0},"end":{"line":0,"column":0},"skip":true}]},"10":{"line":142,"type":"if","locations":[{"start":{"line":59,"column":6},"end":{"line":59,"column":6}},{"start":{"line":59,"column":6},"end":{"line":59,"column":6}}]},"11":{"line":186,"type":"if","locations":[{"start":{"line":92,"column":6},"end":{"line":92,"column":6}},{"start":{"line":92,"column":6},"end":{"line":92,"column":6}}]},"12":{"line":216,"type":"if","locations":[{"start":{"line":120,"column":10},"end":{"line":120,"column":10}},{"start":{"line":120,"column":10},"end":{"line":120,"column":10}}]},"13":{"line":218,"type":"if","locations":[{"start":{"line":123,"column":15},"end":{"line":123,"column":15}},{"start":{"line":123,"column":15},"end":{"line":123,"column":15}}]},"14":{"line":230,"type":"if","locations":[{"start":{"line":137,"column":10},"end":{"line":137,"column":10}},{"start":{"line":137,"column":10},"end":{"line":137,"column":10}}]},"15":{"line":230,"type":"binary-expr","locations":[{"start":{"line":137,"column":14},"end":{"line":137,"column":14}},{"start":{"line":137,"column":49},"end":{"line":137,"column":49}},{"start":{"line":137,"column":90},"end":{"line":137,"column":10}}]}}};
}
__cov_a0IMpjQPRVEPmrXQrTOVVA = __cov_a0IMpjQPRVEPmrXQrTOVVA['packages/spark-core/src/lib/storage/make-spark-plugin-store.js'];
__cov_a0IMpjQPRVEPmrXQrTOVVA.s['1']++;Object.defineProperty(exports,'__esModule',{value:true});__cov_a0IMpjQPRVEPmrXQrTOVVA.s['2']++;var _getOwnPropertyDescriptor=require('babel-runtime/core-js/object/get-own-property-descriptor');__cov_a0IMpjQPRVEPmrXQrTOVVA.s['3']++;var _getOwnPropertyDescriptor2=_interopRequireDefault(_getOwnPropertyDescriptor);__cov_a0IMpjQPRVEPmrXQrTOVVA.s['4']++;var _result=require('lodash/result');__cov_a0IMpjQPRVEPmrXQrTOVVA.s['5']++;var _result2=_interopRequireDefault(_result);__cov_a0IMpjQPRVEPmrXQrTOVVA.s['6']++;var _map=require('babel-runtime/core-js/map');__cov_a0IMpjQPRVEPmrXQrTOVVA.s['7']++;var _map2=_interopRequireDefault(_map);__cov_a0IMpjQPRVEPmrXQrTOVVA.s['8']++;var _classCallCheck2=require('babel-runtime/helpers/classCallCheck');__cov_a0IMpjQPRVEPmrXQrTOVVA.s['9']++;var _classCallCheck3=_interopRequireDefault(_classCallCheck2);__cov_a0IMpjQPRVEPmrXQrTOVVA.s['10']++;var _createClass2=require('babel-runtime/helpers/createClass');__cov_a0IMpjQPRVEPmrXQrTOVVA.s['11']++;var _createClass3=_interopRequireDefault(_createClass2);__cov_a0IMpjQPRVEPmrXQrTOVVA.s['12']++;var _weakMap=require('babel-runtime/core-js/weak-map');__cov_a0IMpjQPRVEPmrXQrTOVVA.s['13']++;var _weakMap2=_interopRequireDefault(_weakMap);__cov_a0IMpjQPRVEPmrXQrTOVVA.s['14']++;exports.default=makeSparkPluginStorage;__cov_a0IMpjQPRVEPmrXQrTOVVA.s['15']++;var _common=require('@ciscospark/common');__cov_a0IMpjQPRVEPmrXQrTOVVA.s['16']++;var _errors=require('./errors');function _interopRequireDefault(obj){__cov_a0IMpjQPRVEPmrXQrTOVVA.f['1']++;__cov_a0IMpjQPRVEPmrXQrTOVVA.s['18']++;return(__cov_a0IMpjQPRVEPmrXQrTOVVA.b['2'][0]++,obj)&&(__cov_a0IMpjQPRVEPmrXQrTOVVA.b['2'][1]++,obj.__esModule)?(__cov_a0IMpjQPRVEPmrXQrTOVVA.b['1'][0]++,obj):(__cov_a0IMpjQPRVEPmrXQrTOVVA.b['1'][1]++,{default:obj});}function _applyDecoratedDescriptor(target,property,decorators,descriptor,context){__cov_a0IMpjQPRVEPmrXQrTOVVA.f['2']++;__cov_a0IMpjQPRVEPmrXQrTOVVA.s['20']++;var desc={};__cov_a0IMpjQPRVEPmrXQrTOVVA.s['21']++;Object['ke'+'ys'](descriptor).forEach(function(key){__cov_a0IMpjQPRVEPmrXQrTOVVA.f['3']++;__cov_a0IMpjQPRVEPmrXQrTOVVA.s['22']++;desc[key]=descriptor[key];});__cov_a0IMpjQPRVEPmrXQrTOVVA.s['23']++;desc.enumerable=!!desc.enumerable;__cov_a0IMpjQPRVEPmrXQrTOVVA.s['24']++;desc.configurable=!!desc.configurable;__cov_a0IMpjQPRVEPmrXQrTOVVA.s['25']++;if((__cov_a0IMpjQPRVEPmrXQrTOVVA.b['4'][0]++,'value'in desc)||(__cov_a0IMpjQPRVEPmrXQrTOVVA.b['4'][1]++,desc.initializer)){__cov_a0IMpjQPRVEPmrXQrTOVVA.b['3'][0]++;__cov_a0IMpjQPRVEPmrXQrTOVVA.s['26']++;desc.writable=true;}else{__cov_a0IMpjQPRVEPmrXQrTOVVA.b['3'][1]++;}__cov_a0IMpjQPRVEPmrXQrTOVVA.s['27']++;desc=decorators.slice().reverse().reduce(function(desc,decorator){__cov_a0IMpjQPRVEPmrXQrTOVVA.f['4']++;__cov_a0IMpjQPRVEPmrXQrTOVVA.s['28']++;return(__cov_a0IMpjQPRVEPmrXQrTOVVA.b['5'][0]++,decorator(target,property,desc))||(__cov_a0IMpjQPRVEPmrXQrTOVVA.b['5'][1]++,desc);},desc);__cov_a0IMpjQPRVEPmrXQrTOVVA.s['29']++;if((__cov_a0IMpjQPRVEPmrXQrTOVVA.b['7'][0]++,context)&&(__cov_a0IMpjQPRVEPmrXQrTOVVA.b['7'][1]++,desc.initializer!==void 0)){__cov_a0IMpjQPRVEPmrXQrTOVVA.b['6'][0]++;__cov_a0IMpjQPRVEPmrXQrTOVVA.s['30']++;desc.value=desc.initializer?(__cov_a0IMpjQPRVEPmrXQrTOVVA.b['8'][0]++,desc.initializer.call(context)):(__cov_a0IMpjQPRVEPmrXQrTOVVA.b['8'][1]++,void 0);__cov_a0IMpjQPRVEPmrXQrTOVVA.s['31']++;desc.initializer=undefined;}else{__cov_a0IMpjQPRVEPmrXQrTOVVA.b['6'][1]++;}__cov_a0IMpjQPRVEPmrXQrTOVVA.s['32']++;if(desc.initializer===void 0){__cov_a0IMpjQPRVEPmrXQrTOVVA.b['9'][0]++;__cov_a0IMpjQPRVEPmrXQrTOVVA.s['33']++;Object['define'+'Property'](target,property,desc);__cov_a0IMpjQPRVEPmrXQrTOVVA.s['34']++;desc=null;}else{__cov_a0IMpjQPRVEPmrXQrTOVVA.b['9'][1]++;}__cov_a0IMpjQPRVEPmrXQrTOVVA.s['35']++;return desc;}__cov_a0IMpjQPRVEPmrXQrTOVVA.s['36']++;var defers=new _weakMap2.default();function makeSparkPluginStorage(type,context){__cov_a0IMpjQPRVEPmrXQrTOVVA.f['5']++;__cov_a0IMpjQPRVEPmrXQrTOVVA.s['38']++;var _dec,_desc,_value,_class;__cov_a0IMpjQPRVEPmrXQrTOVVA.s['39']++;var SparkPluginStorage=(_dec=(0,_common.oneFlight)({keyFactory:function keyFactory(key){__cov_a0IMpjQPRVEPmrXQrTOVVA.f['6']++;__cov_a0IMpjQPRVEPmrXQrTOVVA.s['40']++;return'initValue-'+key;}}),(_class=function(){__cov_a0IMpjQPRVEPmrXQrTOVVA.f['7']++;function SparkPluginStorage(){__cov_a0IMpjQPRVEPmrXQrTOVVA.f['8']++;__cov_a0IMpjQPRVEPmrXQrTOVVA.s['42']++;(0,_classCallCheck3.default)(this,SparkPluginStorage);__cov_a0IMpjQPRVEPmrXQrTOVVA.s['43']++;defers.set(this,new _map2.default());}__cov_a0IMpjQPRVEPmrXQrTOVVA.s['44']++;(0,_createClass3.default)(SparkPluginStorage,[{key:'clear',value:function clear(){__cov_a0IMpjQPRVEPmrXQrTOVVA.f['9']++;__cov_a0IMpjQPRVEPmrXQrTOVVA.s['45']++;return context.spark[type+'Storage'].del(context.getNamespace());}},{key:'del',value:function del(){__cov_a0IMpjQPRVEPmrXQrTOVVA.f['10']++;__cov_a0IMpjQPRVEPmrXQrTOVVA.s['46']++;var _context$spark$;__cov_a0IMpjQPRVEPmrXQrTOVVA.s['47']++;for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){__cov_a0IMpjQPRVEPmrXQrTOVVA.s['48']++;args[_key]=arguments[_key];}__cov_a0IMpjQPRVEPmrXQrTOVVA.s['49']++;return(_context$spark$=context.spark[type+'Storage']).del.apply(_context$spark$,[context.getNamespace()].concat(args));}},{key:'get',value:function get(key){__cov_a0IMpjQPRVEPmrXQrTOVVA.f['11']++;__cov_a0IMpjQPRVEPmrXQrTOVVA.s['50']++;var defer=defers.get(this).get(key);__cov_a0IMpjQPRVEPmrXQrTOVVA.s['51']++;if(!defer){__cov_a0IMpjQPRVEPmrXQrTOVVA.b['10'][0]++;__cov_a0IMpjQPRVEPmrXQrTOVVA.s['52']++;defer=new _common.Defer();__cov_a0IMpjQPRVEPmrXQrTOVVA.s['53']++;defers.get(this).set(key,defer);}else{__cov_a0IMpjQPRVEPmrXQrTOVVA.b['10'][1]++;}__cov_a0IMpjQPRVEPmrXQrTOVVA.s['54']++;return context.spark[type+'Storage'].get(context.getNamespace(),key).then(function(res){__cov_a0IMpjQPRVEPmrXQrTOVVA.f['12']++;__cov_a0IMpjQPRVEPmrXQrTOVVA.s['55']++;defer.resolve();__cov_a0IMpjQPRVEPmrXQrTOVVA.s['56']++;return res;});}},{key:'put',value:function put(){__cov_a0IMpjQPRVEPmrXQrTOVVA.f['13']++;__cov_a0IMpjQPRVEPmrXQrTOVVA.s['57']++;var _context$spark$2;__cov_a0IMpjQPRVEPmrXQrTOVVA.s['58']++;for(var _len2=arguments.length,args=Array(_len2),_key2=0;_key2<_len2;_key2++){__cov_a0IMpjQPRVEPmrXQrTOVVA.s['59']++;args[_key2]=arguments[_key2];}__cov_a0IMpjQPRVEPmrXQrTOVVA.s['60']++;return(_context$spark$2=context.spark[type+'Storage']).put.apply(_context$spark$2,[context.getNamespace()].concat(args));}},{key:'waitFor',value:function waitFor(key){__cov_a0IMpjQPRVEPmrXQrTOVVA.f['14']++;__cov_a0IMpjQPRVEPmrXQrTOVVA.s['61']++;context.logger.info('plugin-storage('+context.getNamespace()+'): waiting to init key `'+key+'`');__cov_a0IMpjQPRVEPmrXQrTOVVA.s['62']++;var defer=defers.get(this).get(key);__cov_a0IMpjQPRVEPmrXQrTOVVA.s['63']++;if(defer){__cov_a0IMpjQPRVEPmrXQrTOVVA.b['11'][0]++;__cov_a0IMpjQPRVEPmrXQrTOVVA.s['64']++;context.logger.info('plugin-storage('+context.getNamespace()+'): already inited `'+key+'`');__cov_a0IMpjQPRVEPmrXQrTOVVA.s['65']++;return defer.promise;}else{__cov_a0IMpjQPRVEPmrXQrTOVVA.b['11'][1]++;}__cov_a0IMpjQPRVEPmrXQrTOVVA.s['66']++;context.logger.info('plugin-storage('+context.getNamespace()+'): initing `'+key+'`');__cov_a0IMpjQPRVEPmrXQrTOVVA.s['67']++;return this.initValue(key);}},{key:'initValue',value:function initValue(key){__cov_a0IMpjQPRVEPmrXQrTOVVA.f['15']++;__cov_a0IMpjQPRVEPmrXQrTOVVA.s['68']++;var defer=new _common.Defer();__cov_a0IMpjQPRVEPmrXQrTOVVA.s['69']++;defers.get(this).set(key,defer);__cov_a0IMpjQPRVEPmrXQrTOVVA.s['70']++;context.spark[type+'Storage'].get(context.getNamespace(),key).then(function(value){__cov_a0IMpjQPRVEPmrXQrTOVVA.f['16']++;__cov_a0IMpjQPRVEPmrXQrTOVVA.s['71']++;context.logger.info('plugin-storage('+context.getNamespace()+'): got `'+key+'` for first time');__cov_a0IMpjQPRVEPmrXQrTOVVA.s['72']++;if(key==='@'){__cov_a0IMpjQPRVEPmrXQrTOVVA.b['12'][0]++;__cov_a0IMpjQPRVEPmrXQrTOVVA.s['73']++;context.parent.set(value);}else{__cov_a0IMpjQPRVEPmrXQrTOVVA.b['12'][1]++;__cov_a0IMpjQPRVEPmrXQrTOVVA.s['74']++;if((0,_result2.default)(context[key],'isState')){__cov_a0IMpjQPRVEPmrXQrTOVVA.b['13'][0]++;__cov_a0IMpjQPRVEPmrXQrTOVVA.s['75']++;context[key].set(value);}else{__cov_a0IMpjQPRVEPmrXQrTOVVA.b['13'][1]++;__cov_a0IMpjQPRVEPmrXQrTOVVA.s['76']++;context.set(key,value);}}__cov_a0IMpjQPRVEPmrXQrTOVVA.s['77']++;context.logger.info('plugin-storage('+context.getNamespace()+'): set `'+key+'` for first time');__cov_a0IMpjQPRVEPmrXQrTOVVA.s['78']++;defer.resolve();__cov_a0IMpjQPRVEPmrXQrTOVVA.s['79']++;context.logger.info('plugin-storage('+context.getNamespace()+'): inited `'+key+'`');}).catch(function(reason){__cov_a0IMpjQPRVEPmrXQrTOVVA.f['17']++;__cov_a0IMpjQPRVEPmrXQrTOVVA.s['80']++;if((__cov_a0IMpjQPRVEPmrXQrTOVVA.b['15'][0]++,reason instanceof _errors.NotFoundError)||(__cov_a0IMpjQPRVEPmrXQrTOVVA.b['15'][1]++,process.env.NODE_ENV!=='production')&&(__cov_a0IMpjQPRVEPmrXQrTOVVA.b['15'][2]++,reason.toString().includes('MockNotFoundError'))){__cov_a0IMpjQPRVEPmrXQrTOVVA.b['14'][0]++;__cov_a0IMpjQPRVEPmrXQrTOVVA.s['81']++;context.logger.info('plugin-storage('+context.getNamespace()+'): no data for `'+key+'`, continuing');__cov_a0IMpjQPRVEPmrXQrTOVVA.s['82']++;return defer.resolve();}else{__cov_a0IMpjQPRVEPmrXQrTOVVA.b['14'][1]++;}__cov_a0IMpjQPRVEPmrXQrTOVVA.s['83']++;context.logger.info('plugin-storage('+context.getNamespace()+'): failed to init `'+key+'`',reason);__cov_a0IMpjQPRVEPmrXQrTOVVA.s['84']++;return defer.reject(reason);});__cov_a0IMpjQPRVEPmrXQrTOVVA.s['85']++;return defer.promise;}}]);__cov_a0IMpjQPRVEPmrXQrTOVVA.s['86']++;return SparkPluginStorage;}(),_applyDecoratedDescriptor(_class.prototype,'initValue',[_dec],(0,_getOwnPropertyDescriptor2.default)(_class.prototype,'initValue'),_class.prototype),_class));__cov_a0IMpjQPRVEPmrXQrTOVVA.s['87']++;return new SparkPluginStorage();}
