{"version":3,"sources":["../../src/interceptors/payload-transformer.js"],"names":["PayloadTransformerInterceptor","options","noTransform","spark","transform","response","reason","then","reject"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMA;;;;AAEA;;;IAGqBA,6B;;;;;;;;;;;;AASnB;;;;;8BAKUC,O,EAAS;AACjB,UAAIA,QAAQC,WAAZ,EAAyB;AACvB,eAAOD,OAAP;AACD;AACD,aAAO,KAAKE,KAAL,CAAWC,SAAX,aAAiCH,OAAjC,CAAP;AACD;;AAED;;;;;;;;;+BAMWA,O,EAASI,Q,EAAU;AAC5B,aAAO,KAAKF,KAAL,CAAWC,SAAX,YAAgCC,QAAhC,CAAP;AACD;;AAED;;;;;;;;;oCAMgBJ,O,EAASK,M,EAAQ;AAC/B,aAAO,KAAKH,KAAL,CAAWC,SAAX,YAAgCE,MAAhC,EACJC,IADI,CACC;AAAA,eAAM,kBAAQC,MAAR,CAAeF,MAAf,CAAN;AAAA,OADD,CAAP;AAED;;;;AAvCD;;;;6BAIgB;AACd,aAAO,IAAIN,6BAAJ,CAAkC,EAACG,OAAO,IAAR,EAAlC,CAAP;AACD;;;0BAlBH;;;;;;kBAWqBH,6B","file":"payload-transformer.js","sourcesContent":["/**!\n *\n * Copyright (c) 2015 Cisco Systems, Inc. See LICENSE file.\n * @private\n */\n\nimport {Interceptor} from '@ciscospark/http-core';\n\n/**\n * @class\n */\nexport default class PayloadTransformerInterceptor extends Interceptor {\n  /**\n   * @param {Object} options\n   * @returns {PayloadTransformerInterceptor}\n   */\n  static create() {\n    return new PayloadTransformerInterceptor({spark: this});\n  }\n\n  /**\n   * @see Interceptor#onRequest\n   * @param {Object} options\n   * @returns {Object}\n   */\n  onRequest(options) {\n    if (options.noTransform) {\n      return options;\n    }\n    return this.spark.transform(`outbound`, options);\n  }\n\n  /**\n   * @see Interceptor#onResponse\n   * @param {Object} options\n   * @param {HttpResponse} response\n   * @returns {Object}\n   */\n  onResponse(options, response) {\n    return this.spark.transform(`inbound`, response);\n  }\n\n  /**\n   * @see Interceptor#onResponseError\n   * @param {Object} options\n   * @param {Error} reason\n   * @returns {Object}\n   */\n  onResponseError(options, reason) {\n    return this.spark.transform(`inbound`, reason)\n      .then(() => Promise.reject(reason));\n  }\n\n}\n"]}